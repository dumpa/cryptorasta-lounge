<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Cryptorasta Lounge</title>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      background: #000;
    }
    #lounge {
      position: relative;
      width: 100vw;
      height: 100vh;
      background: url('images/lounge.png') no-repeat center center;
      background-size: cover;
    }
    .rasta {
      position: absolute;
      width: 64px;
      height: 64px;
      cursor: pointer;
      transition: transform 0.2s;
    }
    .rasta:hover {
      transform: scale(1.2);
    }
    #dialogue {
      position: absolute;
      bottom: 20px;
      left: 50%;
      transform: translateX(-50%);
      background: rgba(0,0,0,0.7);
      color: #fff;
      padding: 10px 20px;
      border-radius: 10px;
      font-family: monospace;
      display: none;
    }
  </style>
</head>
<body>
  <div id="lounge">
    <audio id="dub" loop>
      <source src="dub1.mp3" type="audio/mpeg">
    </audio>
    <div id="dialogue"></div>

    <!-- Rastas will be loaded here dynamically -->

    <!-- Record player area -->
    <div style="position:absolute; bottom:10%; left:45%; width:100px; height:100px; cursor:pointer;" onclick="toggleDub()"></div>
  </div>

  <script>
    const dub = document.getElementById('dub');
    const dialogue = document.getElementById('dialogue');
    const lounge = document.getElementById('lounge');

    function toggleDub() {
      if (dub.paused) {
        dub.play();
      } else {
        dub.pause();
      }
    }

    function showDialogue(text) {
      dialogue.innerText = text;
      dialogue.style.display = 'block';
      setTimeout(() => dialogue.style.display = 'none', 3000);
    }

    fetch('cryptorastas.json')
      .then(response => response.json())
      .then(data => {
        data.forEach((rasta, index) => {
          const img = document.createElement('img');
          img.src = rasta.image;
          img.classList.add('rasta');
          const top = rasta.position?.top || `${Math.random() * 80 + 10}%`;
          const left = rasta.position?.left || `${Math.random() * 80 + 10}%`;
          img.style.top = top;
          img.style.left = left;
          img.onclick = () => showDialogue(`${rasta.name} says: \"${rasta.quote}\"`);
          lounge.appendChild(img);
        });
      });
  </script>
</body>
</html>
